{% extends 'base-setor.html' %}
{% load time_format %}
{% block head %}
    <script type="text/javascript" charset="utf-8">
    $(document).ready( function () {
        $('div.infor').ready(function(){
            var table = $('table.tabela').dataTable();
            var tableTools = new $.fn.dataTable.TableTools( oTable, {
            "buttons": [
                "copy",
                "csv",
                "xls",
                "pdf",
                { "type": "print", "buttonText": "Print me!" }
            ]
        });
        } );

        $( tableTools.fnContainer() ).insertAfter('div.info');
} );
		</script>
{% endblock %}
{% block matter%}
<div class="matter">
    <div class="container">
        <div class="row">
            <div class="col-md-8">

                <div class="widget">

                <div class="widget-head">
                  <div class="pull-left">Colaboradores do Setor</div>
                  <div class="widget-icons pull-right">
                    <a href="#" class="wminimize"><i class="fa fa-chevron-up"></i></a>
                    <a href="#" class="wclose"><i class="fa fa-times"></i></a>
                  </div>
                  <div class="clearfix"></div>
                </div>

                  <div id="info" class="widget-content">

                    <table id="tabela" class="table table-striped table-bordered table-hover">
                      <thead>
                        <tr>
                          <th>Nome</th>
                          <th>Acumulado ultimo mês</th>
                          <th>Acumulado ultima semana</th>
                        </tr>
                      </thead>
                      <tbody>

                      {% for usuario in departamento.usuario_set.all %}
                        <tr>
                          <td><a href="/detalhes_usuario/{{ setor_id }}/{{ usuario.id }}">{{ usuario.nome }}</a></td>
                          <td>{% horas_acumuladas  usuario.horas_mes_passado %}</td>
                          <td>{% horas_acumuladas usuario.horas_semana_passada %}</td>
                        </tr>
                      {% endfor %}
                      </tbody>
                    </table>

                    <div class="widget-foot">


                        <ul class="pagination pagination-sm pull-right">
                          <li><a href="#">Prev</a></li>
                          <li><a href="#">1</a></li>
                          <li><a href="#">2</a></li>
                          <li><a href="#">3</a></li>
                          <li><a href="#">4</a></li>
                          <li><a href="#">Next</a></li>
                        </ul>

                      <div class="clearfix"></div>

                    </div>

                  </div>

                </div>

              </div>

            <div class="col-md-4">

              <div class="widget">
                <!-- Widget title -->
                <div class="widget-head">
                  <div class="pull-left">Ranking Mensal</div>
                  <div class="widget-icons pull-right">
                    <a href="#" class="wminimize"><i class="fa fa-chevron-up"></i></a>
                    <a href="#" class="wclose"><i class="fa fa-times"></i></a>
                  </div>
                  <div class="clearfix"></div>
                </div>
                <div class="widget-content referrer">
                  <!-- Widget content -->

                  <table class="table table-striped table-bordered table-hover">
                    <tr>
                      <th><center>#</center></th>
                      <th>Colaborador</th>
                      <th>Número de Horas</th>
                    </tr>
                    {% for usuario in departamento.ranking_mensal %}
                        <tr>
                            <th></th>
                            <th>{{ usuario.nome }}</th>
                            <th>{% horas_acumuladas usuario.horas_mes_passado %}</th>
                        </tr>
                    {% endfor %}
                  </table>

                  <div class="widget-foot">
                  </div>
                </div>
              </div>

            </div>
          </div>
    </div>
</div>
{% endblock %}